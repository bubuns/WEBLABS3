# Лабораторная работа № 4. Управление учетными записями пользователей

Веб-приложение для управления учетными записями пользователей с использованием Flask, реализующее полный CRUD функционал.

## Функциональность

- **Аутентификация**: вход/выход из системы
- **Управление пользователями**: создание, просмотр, редактирование, удаление
- **Управление ролями**: назначение ролей пользователям
- **Валидация данных**: проверка корректности введенных данных
- **Смена пароля**: возможность изменения пароля текущего пользователя

## Структура проекта

```
├── app.py              # Основное приложение Flask
├── test_app.py         # Тесты для всего функционала
├── requirements.txt    # Зависимости Python
├── templates/          # HTML шаблоны
│   ├── base.html       # Базовый шаблон
│   ├── index.html      # Главная страница
│   ├── login.html      # Страница входа
│   ├── view_user.html  # Просмотр пользователя
│   ├── user_form.html  # Форма создания/редактирования
│   └── change_password.html # Смена пароля
└── users.db           # База данных SQLite (создается автоматически)
```

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите приложение:
```bash
python app.py
```

3. Откройте браузер и перейдите по адресу: http://localhost:5000

## Данные по умолчанию

При первом запуске создается администратор:
- **Логин**: admin
- **Пароль**: admin123

## Модели данных

### User (Пользователь)
- `id` - идентификатор
- `login` - логин (уникальный)
- `password_hash` - хеш пароля
- `surname` - фамилия
- `name` - имя
- `patronymic` - отчество
- `role_id` - идентификатор роли
- `created_at` - дата создания

### Role (Роль)
- `id` - идентификатор
- `name` - название роли
- `description` - описание роли

## Валидация данных

### Логин
- Не может быть пустым
- Минимум 5 символов
- Только латинские буквы и цифры

### Пароль
- 8-128 символов
- Минимум одна заглавная и одна строчная буква
- Минимум одна цифра
- Только латинские или кириллические буквы
- Без пробелов
- Допустимые символы: ~ ! ? @ # $ % ^ & * _ - + ( ) [ ] { } > < / \ | " ' . , : ;

### Имя и фамилия
- Не могут быть пустыми

## Тестирование

Запустите тесты:
```bash
python test_app.py
```

Тесты покрывают:
- Валидацию данных
- Аутентификацию
- CRUD операции
- Права доступа
- Обработку ошибок

## Технологии

- **Flask** - веб-фреймворк
- **SQLAlchemy** - ORM для работы с БД
- **Bootstrap 5** - CSS фреймворк для стилизации
- **SQLite** - база данных
- **Werkzeug** - для хеширования паролей
