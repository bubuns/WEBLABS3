# Образовательный портал - Лабораторная работа №6

Веб-приложение "Образовательный портал" с функциональностью отзывов к онлайн-курсам.

## Функциональность

- Просмотр курсов с категориями
- Система аутентификации пользователей
- Создание и просмотр отзывов к курсам
- Рейтинговая система (0-5 звезд)
- Сортировка отзывов (по новизне, положительные, отрицательные)
- Пагинация отзывов
- Пересчет рейтинга курса на основе отзывов

## Установка и запуск

### 1. Создание виртуального окружения

```bash
python3 -m venv ve
# Windows:
ve\Scripts\activate
# Linux/Mac:
source ve/bin/activate
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 3. Инициализация базы данных

```bash
python init_db.py
```

### 4. Запуск приложения

```bash
flask run
```

Приложение будет доступно по адресу: http://127.0.0.1:5000

## Тестовые данные

После инициализации базы данных будут созданы:

- **Пользователь**: логин `user`, пароль `qwerty`
- **Категории**: Программирование, Математика, Языкознание
- **Тестовый курс**: "Основы Python"

## Запуск тестов

```bash
pytest tests/
```

## Структура проекта

```
lab6_template/
├── app/
│   ├── models.py              # Модели данных (User, Course, Review, etc.)
│   ├── courses.py             # Маршруты для курсов и отзывов
│   ├── repositories/          # Репозитории для работы с данными
│   │   └── review_repository.py
│   └── templates/             # HTML шаблоны
│       └── courses/
│           ├── show.html      # Страница курса с отзывами
│           └── reviews.html   # Страница всех отзывов
├── tests/                     # Тесты
│   ├── test_reviews.py
│   └── conftest.py
└── init_db.py                # Скрипт инициализации БД
```

## Новые возможности (Лабораторная работа №6)

### Модель Review
- `id` - идентификатор отзыва
- `rating` - оценка (0-5)
- `text` - текст отзыва
- `created_at` - дата создания
- `course_id` - ID курса
- `user_id` - ID пользователя

### Новые маршруты
- `GET /courses/<id>/reviews` - страница всех отзывов
- `POST /courses/<id>/reviews/create` - создание отзыва

### Функциональность
- Отображение последних 5 отзывов на странице курса
- Полная страница отзывов с пагинацией
- Сортировка отзывов (новизна, положительные, отрицательные)
- Форма создания отзыва с валидацией
- Пересчет рейтинга курса при добавлении отзыва
- Проверка на дублирование отзывов от одного пользователя

## Технологии

- **Flask** - веб-фреймворк
- **SQLAlchemy** - ORM для работы с БД
- **Flask-Login** - аутентификация
- **Bootstrap** - CSS фреймворк
- **SQLite** - база данных (по умолчанию)

